# Wall Climb
execute as @s[scores={move_stamina=1..,move_sneaking=0}] at @s positioned ~ ~1 ~ unless block ^ ^ ^1 air if block ~ ~-1.1 ~ air run effect give @s slow_falling 3 2 true
execute as @e[tag=move_climbing,scores={move_age=5..}] at @s run tp @s ~ ~-500 ~
execute as @s[scores={move_stamina=1..,move_sneaking=1..}] at @s positioned ~ ~1 ~ unless block ^ ^ ^1 air if block ~ ~-1.1 ~ air run summon minecraft:area_effect_cloud ~ ~-2.4 ~ {NoGravity:1b,Passengers:[{id:"minecraft:shulker",Color:3,Silent:1b,Tags:["move_climbing"],NoAI:1b}],Tags:["move_climbing"],Age:-2147483648,Duration:-1,WaitTime:-2147483648}
execute as @s[scores={move_stamina=1..39}] at @s if block ~ ~-.1 ~ air positioned ~ ~-1 ~ if entity @e[type=shulker,tag=move_climbing,distance=..2] unless entity @e[type=shulker,tag=move_wall_run,distance=..2] run effect give @s jump_boost 1 4 true
execute as @s[scores={move_stamina=1..39,move_sneaking=1..}] at @s if block ~ ~-.1 ~ air run effect give @s slow_falling 1 0 true
execute as @s[scores={move_stamina=1..39,move_wall_jump=1..}] at @s run scoreboard players remove @s move_stamina 10
execute as @s[scores={move_stamina=1..,move_sneaking=1..}] at @s positioned ~ ~1 ~ unless block ^ ^ ^1 air if block ~ ~-1.1 ~ air run scoreboard players remove @s move_stamina 1
execute unless score @s move_stamina matches 40 unless block ~ ~-1 ~ air run scoreboard players set @s move_stamina 40
execute as @s[scores={move_sneaking=0}] at @s positioned ~ ~1 ~ if block ^ ^ ^1 air if block ^1 ^ ^1 air if block ^-1 ^ ^1 air run effect clear @s minecraft:slow_falling

# Wall Run
execute as @s[scores={move_stamina=1..,move_sneaking=0}] at @s positioned ~ ~1 ~ if block ^1 ^ ^1 minecraft:andesite if block ~ ~-1.1 ~ air if block ~ ~-2.1 ~ air positioned ^ ^ ^1.5 run summon minecraft:area_effect_cloud ~ ~-2.25 ~ {NoGravity:1b,Passengers:[{id:"minecraft:shulker",Color:3,Silent:1b,Tags:["move_climbing","move_wall_run"],NoAI:1b,ActiveEffects:[{Id:11b,Amplifier:100b,Duration:1000000,ShowParticles:0b}]}],Tags:["move_climbing"],Age:-2147483648,Duration:-1,WaitTime:-2147483648}
execute as @s[scores={move_stamina=1..,move_sneaking=0}] at @s positioned ~ ~1 ~ if block ^-1 ^ ^1 minecraft:andesite if block ~ ~-1.1 ~ air if block ~ ~-2.1 ~ air positioned ^ ^ ^1.5 run summon minecraft:area_effect_cloud ~ ~-2.25 ~ {NoGravity:1b,Passengers:[{id:"minecraft:shulker",Color:3,Silent:1b,Tags:["move_climbing","move_wall_run"],NoAI:1b,ActiveEffects:[{Id:11b,Amplifier:100b,Duration:1000000,ShowParticles:0b}]}],Tags:["move_climbing"],Age:-2147483648,Duration:-1,WaitTime:-2147483648}
execute as @s[scores={move_stamina=1..,move_sneaking=0}] at @s positioned ~ ~1 ~ if block ^1 ^ ^1 minecraft:andesite if block ~ ~-1.1 ~ air if block ~ ~-2.1 ~ air positioned ~ ~-1 ~ if entity @e[type=shulker,tag=move_wall_run,distance=..2] run scoreboard players remove @s move_stamina 2
execute as @s[scores={move_stamina=1..,move_sneaking=0}] at @s positioned ~ ~1 ~ if block ^-1 ^ ^1 minecraft:andesite if block ~ ~-1.1 ~ air if block ~ ~-2.1 ~ air positioned ~ ~-1 ~ if entity @e[type=shulker,tag=move_wall_run,distance=..2] run scoreboard players remove @s move_stamina 2